jQuery(document).ready(function(e){e("#edd-wl-modal").on("keypress","#list-name",function(e){if(e.keyCode=="13")return!1});e(".edd-no-js").hide();e("a.edd-add-to-wish-list").addClass("edd-has-js");e("body").on("click.eddAddToCartFromWishList",".edd-add-to-cart-from-wish-list",function(t){t.preventDefault();var n=e(this),r=n.closest("div"),i=e(this).find(".edd-loading"),s=i.width(),o=i.height();n.attr("data-edd-loading","");i.css({"margin-left":s/-2,"margin-top":o/-2});var u=n.data("download-id"),a=n.data("variable-price"),f=n.data("price-option"),l=n.data("price-mode"),c=[];a=="yes"?c[0]=f:c[0]=u;var h=n.data("action"),p={action:h,download_id:u,price_ids:c,nonce:edd_scripts.ajax_nonce};e.ajax({type:"POST",data:p,dataType:"json",url:edd_scripts.ajaxurl,success:function(t){if(e(".cart_item.empty").length){e(t.cart_item).insertBefore(".cart_item.edd_subtotal");e(".cart_item.edd_checkout, .cart_item.edd_subtotal").show();e(".cart_item.empty").remove()}else e(t.cart_item).insertBefore(".cart_item.edd_subtotal");e(".cart_item.edd_subtotal span").html(t.subtotal);e("span.edd-cart-quantity").each(function(){var t=parseInt(e(this).text(),10)+1;e(this).text(t)});e(".edd-cart-number-of-items").css("display")=="none"&&e(".edd-cart-number-of-items").show("slow");e("a.edd-add-to-cart-from-wish-list",r).toggle();e(".edd-go-to-checkout-from-wish-list",r).css("display","inline-block");if(t!="incart"){e(".edd-cart-added-alert",r).fadeIn();setTimeout(function(){e(".edd-cart-added-alert",r).fadeOut()},3e3)}}}).fail(function(e){console.log(e)}).done(function(e){});return!1});e("body").on("click.eddRemoveFromWishList",".edd-remove-from-wish-list",function(t){t.preventDefault();var n=e(this),r=n.data("cart-item"),i=n.data("action"),s=n.data("download-id"),o=n.data("list-id"),u={action:i,cart_item:r,list_id:o,nonce:edd_scripts.ajax_nonce};e.ajax({type:"POST",data:u,dataType:"json",url:edd_scripts.ajaxurl,success:function(t){if(t.removed){if(parseInt(edd_scripts.position_in_cart,10)===parseInt(r,10)){window.location=window.location;return!1}if(t.message){e("ul.edd-wish-list").parent().prepend(t.message);e(".edd-wl-add-all-to-cart").parent().remove();e(".edd-wl-sharing").remove()}e(".edd-wish-list").find("[data-cart-item='"+r+"']").parent().parent().remove()}}}).fail(function(e){console.log(e)}).done(function(e){});return!1});e("body").on("click.eddwlOpenModal",".edd-wl-open-modal",function(t){t.preventDefault();var n=e(this),r=n.closest("form"),i=e(this).find(".edd-loading"),s=e(this).closest("div"),o=i.width(),u=i.height();e(this).attr("data-edd-loading","");i.css({"margin-left":o/-2,"margin-top":u/-2});var r=jQuery(".edd_download_purchase_form"),a=n.data("download-id"),f=n.data("variable-price"),l=n.data("price-mode"),c=n.data("price-option"),h=[];if(c>=0)h[0]=c;else if(f=="yes"){if(!e(".edd_price_option_"+a+":checked",r).length){e(this).removeAttr("data-edd-loading");alert(edd_scripts.select_option);return}e(".edd_price_option_"+a+":checked",r).each(function(t){h[t]=e(this).val()})}else h[0]=a;var p={action:e(this).data("action"),post_id:e(this).data("download-id"),price_ids:h,nonce:edd_wl_scripts.ajax_nonce};c>=0&&(p.price_option_single=!0);e.ajax({type:"POST",data:p,dataType:"json",url:edd_scripts.ajaxurl,success:function(t){e("#edd-wl-modal .modal-content").html(t.lists);e(".edd-wl-open-modal").removeAttr("data-edd-loading");e("a.edd-wl-open-modal").addClass("edd-has-js");e(".edd-no-js").hide();if("new-list"===e("input:radio[name=list-options]:checked").val()||t.list_count===0){e("#list-name").show();e("#list-status").show();e("#user-lists").hide();e("input:radio[name=list-options]").prop("checked",!0)}else{e("#list-name").hide();e("#list-status").hide()}e("input:radio[name=list-options]").click(function(){if(e(this).attr("id")==="new-list"){e("#list-name").show().focus();e("#list-status").show();e("#user-lists").hide()}else{e("#list-name").hide();e("#list-status").hide();e("#user-lists").show()}});e("#edd-wl-modal").modal({backdrop:"static"})}}).fail(function(e){console.log(e)}).done(function(e){console.log(e)})});e("body").on("click.eddAddToWishList",".edd-wl-save",function(t){t.preventDefault();var n=e(this).find(".edd-loading"),r=n.width(),i=n.height();e(this).attr("data-edd-loading","");n.css({"margin-left":r/-2,"margin-top":i/-2});var s=e(this),o=s.closest("form"),o=jQuery(".edd_download_purchase_form"),u=s.data("download-id"),a=s.data("variable-price"),f=s.data("price-mode"),l=[],c=e("input[name=edd-wl-single-price-option]").val();if(c=="yes")l[0]=e("input[name=edd-wish-lists-post-id]").val();else if(a=="yes"){if(!e(".edd_price_option_"+u+":checked",o).length){e(this).removeAttr("data-edd-loading");alert(edd_scripts.select_option);return}e("input[name=edd-wish-lists-post-id]").each(function(t){l[t]=e(this).val()})}else l[0]=u;"existing-list"==jQuery("input:radio[name=list-options]:checked").val()&&(p=jQuery("#user-lists").val());var h=s.data("action"),p=p,d=jQuery("input[name=list-name]").val(),v=jQuery("select[name=list-status]").val(),m=jQuery("input:radio[name=list-options]:checked").val(),g={action:h,download_id:u,list_id:p,price_ids:l,new_or_existing:m,list_name:d,list_status:v,nonce:edd_scripts.ajax_nonce};e.ajax({type:"POST",data:g,dataType:"json",url:edd_scripts.ajaxurl,success:function(t){e(".edd-wl-save").hide();e(".edd-wl-success").show();e(".modal-body").html(t.success);t.list_created==1&&e("#list-name").val("");if(edd_wl_scripts.redirect_to_wish_list=="1")window.location=edd_wl_scripts.wish_list_page;else{e("span.edd-cart-quantity").each(function(){var t=parseInt(e(this).text(),10)+1;e(this).text(t)});f=="multi"&&s.removeAttr("data-edd-loading")}}}).fail(function(e){console.log(e)}).done(function(e){});return!1})});